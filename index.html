<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circuit Runner - DC Current Adventure</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="loadingScreen">
        <div class="loader">
            <div class="circuit-board">
                <div class="resistor"></div>
                <div class="wire"></div>
                <div class="bulb"></div>
            </div>
            <p>Loading Circuit Runner...</p>
        </div>
    </div>

    <div id="startScreen" class="screen">
        <div class="title-container">
            <h1><i class="fas fa-bolt"></i> CIRCUIT RUNNER</h1>
            <h2>DC Current & Circuits Adventure</h2>
            <p>Navigate the circuit maze, solve physics problems, and master Ohm's Law!</p>
            
            <div class="bloom-levels">
                <div class="bloom-card" data-level="1">
                    <i class="fas fa-brain"></i>
                    <h3>Level 1: Remember</h3>
                    <p>Recall basic DC circuit concepts</p>
                </div>
                <div class="bloom-card" data-level="2">
                    <i class="fas fa-lightbulb"></i>
                    <h3>Level 2: Understand</h3>
                    <p>Explain circuit principles</p>
                </div>
                <div class="bloom-card" data-level="3">
                    <i class="fas fa-calculator"></i>
                    <h3>Level 3: Apply</h3>
                    <p>Use formulas to solve problems</p>
                </div>
                <div class="bloom-card" data-level="4">
                    <i class="fas fa-search"></i>
                    <h3>Level 4: Analyze</h3>
                    <p>Break down complex circuits</p>
                </div>
                <div class="bloom-card" data-level="5">
                    <i class="fas fa-rocket"></i>
                    <h3>Level 5: Create</h3>
                    <p>Design circuits to meet requirements</p>
                </div>
            </div>
            
            <button id="startButton" class="btn-primary">
                <i class="fas fa-play"></i> Start Game
            </button>
            <button id="continueButton" class="btn-secondary">
                <i class="fas fa-history"></i> Continue Game
            </button>
        </div>
    </div>

    <div id="gameContainer" class="hidden">
        <canvas id="gameCanvas"></canvas>
        
        <div id="hud">
            <div class="hud-left">
                <div class="hud-item">
                    <i class="fas fa-bolt"></i>
                    <span id="score">0</span>
                </div>
                <div class="hud-item">
                    <i class="fas fa-battery-full"></i>
                    <span id="voltage">0V</span>
                </div>
                <div class="hud-item">
                    <i class="fas fa-layer-group"></i>
                    <span id="level">1</span>
                </div>
            </div>
            
            <div class="hud-right">
                <div class="hud-item">
                    <i class="fas fa-question-circle"></i>
                    <span id="questionsSolved">0/5</span>
                </div>
                <div class="hud-item">
                    <i class="fas fa-clock"></i>
                    <span id="timer">00:00</span>
                </div>
                <button id="pauseButton" class="btn-small">
                    <i class="fas fa-pause"></i>
                </button>
            </div>
        </div>

        <div id="controlsHelp" class="hidden">
            <h4>Controls:</h4>
            <p>WASD: Move | Space: Jump | E: Dig/Place | R: Interact</p>
        </div>
    </div>

    <div id="questionModal" class="modal hidden">
        <div class="modal-content">
            <div class="question-header">
                <h3 id="questionTitle">Circuit Challenge</h3>
                <span class="bloom-tag" id="bloomLevel">Level 1: Remember</span>
            </div>
            
            <div class="circuit-diagram" id="circuitDiagram">
                <!-- Circuit SVG will be injected here -->
            </div>
            
            <p id="questionText"></p>
            
            <div id="optionsContainer" class="options-grid"></div>
            
            <div class="question-footer">
                <button id="submitAnswer" class="btn-primary" disabled>
                    <i class="fas fa-paper-plane"></i> Submit Answer
                </button>
                <div class="hint-box">
                    <button id="hintButton" class="btn-small">
                        <i class="fas fa-lightbulb"></i> Hint
                    </button>
                    <p id="hintText" class="hidden"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="pauseMenu" class="modal hidden">
        <div class="modal-content">
            <h2><i class="fas fa-pause"></i> Game Paused</h2>
            <button id="resumeButton" class="btn-primary">
                <i class="fas fa-play"></i> Resume
            </button>
            <button id="restartButton" class="btn-secondary">
                <i class="fas fa-redo"></i> Restart Level
            </button>
            <button id="mainMenuButton" class="btn-secondary">
                <i class="fas fa-home"></i> Main Menu
            </button>
        </div>
    </div>

    <div id="levelComplete" class="modal hidden">
        <div class="modal-content celebration">
            <h2><i class="fas fa-trophy"></i> Level Complete!</h2>
            <div class="stats">
                <p>Questions Solved: <span id="completeQuestions">0/5</span></p>
                <p>Time: <span id="completeTime">00:00</span></p>
                <p>Score: <span id="completeScore">0</span></p>
                <p>Accuracy: <span id="completeAccuracy">0%</span></p>
            </div>
            <button id="nextLevelButton" class="btn-primary">
                <i class="fas fa-arrow-right"></i> Next Level
            </button>
        </div>
    </div>
    <!-- 1. Cannon.js FIRST -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cannon.js/0.6.2/cannon.min.js"></script>
    <!-- 2. Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r150/three.min.js"></script>
    <!-- 3. Howler.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script src="js/questions.js"></script>
    <script src="js/levels.js"></script>
    <script src="js/player.js"></script>
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
